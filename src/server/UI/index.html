<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SKings URL shortener</title>
    <link rel="icon" href="assets/SKings.png" type="image/png" sizes="16x16">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
    Insert URL: <input id="input_url" name="long_url" type="text"/>
    <input type="submit" value="create" onclick="create()"/>
    <p id="error_msg" style="color: red; font-size: .5em"></p>
    <a id="short_url"></a>
</body>
<script type="text/javascript">
    function create() {
        $('#short_url').html("")
        $('#short_url').attr("href", "")
        $('#error_msg').html("")
        let long_url = document.getElementById('input_url').value
        $.post("/add", {long_url:long_url},
            function(result){
                $('#short_url').html(result.short_url)
                $('#short_url').attr("href", result.short_url)
            }
        ).fail(function (result) {
            $('#error_msg').html(result.responseJSON.msg)
        });
    }
</script>
</html>